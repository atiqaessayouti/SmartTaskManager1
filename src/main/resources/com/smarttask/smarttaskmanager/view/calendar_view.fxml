<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.web.WebView?>

<BorderPane style="-fx-background-color: #f8f9fa;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.smarttask.smarttaskmanager.controller.CalendarController">

    <left>
        <VBox prefWidth="220.0" spacing="10.0" style="-fx-background-color: linear-gradient(to bottom right, #4A00E0, #8E2DE2); -fx-padding: 20; -fx-background-radius: 0 30 30 0;">
            <effect>
                <DropShadow color="rgba(0,0,0,0.25)" radius="15" width="20" />
            </effect>

            <Label text="SmartManager" textFill="WHITE">
                <font><Font name="System Bold" size="18.0" /></font>
                <effect><DropShadow color="rgba(0,0,0,0.3)" offsetY="1" radius="2" /></effect>
            </Label>

            <Separator opacity="0.3" style="-fx-background-color: white;" />

            <VBox spacing="8.0" VBox.vgrow="ALWAYS">
                <Button maxWidth="Infinity" onAction="#goToDashboard" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 8 10;" text="Dashboard" />
                <Button maxWidth="Infinity" onAction="#goToTasks" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 8 10;" text="My Tasks" />

                <Button maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand; -fx-padding: 8 10;" text="Calendar" />

                <Button maxWidth="Infinity" onAction="#goToProfile" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 8 10;" text="Profile" />
            </VBox>

            <Button maxWidth="Infinity" onAction="#handleLogout" style="-fx-background-color: rgba(255, 69, 58, 0.9); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand; -fx-padding: 8;" text="Logout" />
        </VBox>
    </left>

    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: white; -fx-padding: 10 20; -fx-border-color: #f1f2f6; -fx-border-width: 0 0 2 0;">
            <Label fx:id="yearMonthLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Calendrier" />

            <AnchorPane HBox.hgrow="ALWAYS" />

            <Button onAction="#previousMonth" style="-fx-background-color: white; -fx-border-color: #4A00E0; -fx-text-fill: #4A00E0; -fx-font-weight: bold; -fx-cursor: hand;" text="&lt;" />
            <Button onAction="#nextMonth" style="-fx-background-color: white; -fx-border-color: #4A00E0; -fx-text-fill: #4A00E0; -fx-font-weight: bold; -fx-cursor: hand;" text="&gt;" />
        </HBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">

            <Tab text="ðŸ“… Mon Planning (Local)">
                <VBox style="-fx-padding: 15;">
                    <ScrollPane fitToHeight="true" fitToWidth="true" VBox.vgrow="ALWAYS">
                        <GridPane fx:id="calendarGrid" gridLinesVisible="true" style="-fx-background-color: white;">
                            <columnConstraints>
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14.28" />
                            </columnConstraints>
                            <rowConstraints>
                                <RowConstraints minHeight="60.0" vgrow="ALWAYS" />
                            </rowConstraints>
                        </GridPane>
                    </ScrollPane>
                </VBox>
            </Tab>

            <Tab text="ðŸŒ Google Agenda (Vacances)">
                <AnchorPane>
                    <WebView fx:id="calendarWebView" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0" />
                </AnchorPane>
            </Tab>

        </TabPane>
    </center>

    <right>
        <VBox prefWidth="220" spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #f1f2f6;">
            <Label style="-fx-font-weight: bold;" text="TÃ¢ches non planifiÃ©es" />
            <Button maxWidth="Infinity" onAction="#handleAddTask" style="-fx-background-color: #4A00E0; -fx-text-fill: white; -fx-cursor: hand; -fx-font-weight: bold;" text="+ Nouvelle TÃ¢che" />
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                <VBox fx:id="taskListContainer" spacing="6" />
            </ScrollPane>
        </VBox>
    </right>

</BorderPane>