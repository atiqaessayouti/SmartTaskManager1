<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="mainBorderPane" prefHeight="800.0" prefWidth="1200.0"
            style="-fx-background-color: #f8f9fa;"
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.smarttask.smarttaskmanager.controller.AdminDashboardController">

    <left>
        <VBox spacing="20.0" prefWidth="260.0"
              style="-fx-background-color: linear-gradient(to bottom right, #4A00E0, #8E2DE2); -fx-background-radius: 0 30 30 0; -fx-padding: 30;">
            <effect>
                <DropShadow color="rgba(0,0,0,0.25)" radius="20" width="30" />
            </effect>

            <Label text="ADMIN PANEL" textFill="WHITE">
                <font><Font name="Segoe UI Bold" size="24.0"/></font>
                <effect><DropShadow color="rgba(0,0,0,0.3)" radius="5" offsetY="2"/></effect>
            </Label>

            <Separator opacity="0.4" style="-fx-background-color: white;" />

            <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                <Button text="ðŸ“Š Overview" maxWidth="Infinity"
                        style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-weight: bold; -fx-alignment: CENTER_LEFT; -fx-padding: 12 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                <Button text="ðŸ‘¥ User Management" maxWidth="Infinity"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: bold; -fx-alignment: CENTER_LEFT; -fx-padding: 12 20; -fx-cursor: hand;"/>

                <Button text="âš™ï¸ Settings" maxWidth="Infinity"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: bold; -fx-alignment: CENTER_LEFT; -fx-padding: 12 20; -fx-cursor: hand;"/>
            </VBox>

            <Button onAction="#handleLogout" text="Log Out" maxWidth="Infinity"
                    style="-fx-background-color: rgba(255, 69, 58, 0.9); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 12; -fx-cursor: hand;">
                <effect><DropShadow color="rgba(0,0,0,0.2)" radius="5"/></effect>
            </Button>
        </VBox>
    </left>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background: #f8f9fa; -fx-background-color: transparent;">
            <VBox spacing="30.0" style="-fx-padding: 40;">

                <HBox alignment="CENTER_LEFT" spacing="20">
                    <VBox>
                        <Label text="Analytics Dashboard" textFill="#2d3436">
                            <font><Font name="Segoe UI Bold" size="28.0"/></font>
                        </Label>
                        <Label text="Overview of system performance and users." textFill="#636e72"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Button onAction="#toggleTheme" text="ðŸŒ™ Theme"
                            style="-fx-background-color: white; -fx-text-fill: #2d3436; -fx-border-color: #dfe6e9; -fx-border-radius: 20; -fx-background-radius: 20; -fx-cursor: hand;"/>
                </HBox>

                <HBox spacing="20.0">
                    <VBox HBox.hgrow="ALWAYS" style="-fx-background-color: linear-gradient(to right, #4facfe 0%, #00f2fe 100%); -fx-background-radius: 20; -fx-padding: 25;">
                        <effect><DropShadow color="rgba(79, 172, 254, 0.3)" radius="15" offsetY="5"/></effect>
                        <Label text="Total Tasks" textFill="WHITE" style="-fx-font-weight: bold; -fx-opacity: 0.9;"/>
                        <Label fx:id="lblTotalTasks" text="0" textFill="WHITE">
                            <font><Font name="Segoe UI Bold" size="36.0"/></font>
                        </Label>
                    </VBox>

                    <VBox HBox.hgrow="ALWAYS" style="-fx-background-color: linear-gradient(to right, #43e97b 0%, #38f9d7 100%); -fx-background-radius: 20; -fx-padding: 25;">
                        <effect><DropShadow color="rgba(67, 233, 123, 0.3)" radius="15" offsetY="5"/></effect>
                        <Label text="Completed" textFill="WHITE" style="-fx-font-weight: bold; -fx-opacity: 0.9;"/>
                        <Label fx:id="lblCompletedTasks" text="0" textFill="WHITE">
                            <font><Font name="Segoe UI Bold" size="36.0"/></font>
                        </Label>
                    </VBox>

                    <VBox HBox.hgrow="ALWAYS" style="-fx-background-color: linear-gradient(to right, #fa709a 0%, #fee140 100%); -fx-background-radius: 20; -fx-padding: 25;">
                        <effect><DropShadow color="rgba(250, 112, 154, 0.3)" radius="15" offsetY="5"/></effect>
                        <Label text="Pending" textFill="WHITE" style="-fx-font-weight: bold; -fx-opacity: 0.9;"/>
                        <Label fx:id="lblPendingTasks" text="0" textFill="WHITE">
                            <font><Font name="Segoe UI Bold" size="36.0"/></font>
                        </Label>
                    </VBox>
                </HBox>

                <HBox spacing="20.0">
                    <VBox style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 20;" HBox.hgrow="ALWAYS">
                        <effect><DropShadow color="rgba(0,0,0,0.05)" radius="10" offsetY="5"/></effect>
                        <Label text="Performance Trends" textFill="#2d3436" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        <LineChart fx:id="performanceLineChart" prefHeight="250.0" style="-fx-background-color: transparent;">
                            <xAxis><CategoryAxis label="Timeline" side="BOTTOM" /></xAxis>
                            <yAxis><NumberAxis label="Tasks" side="LEFT" /></yAxis>
                        </LineChart>
                    </VBox>

                    <VBox prefWidth="400.0" style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 20;">
                        <effect><DropShadow color="rgba(0,0,0,0.05)" radius="10" offsetY="5"/></effect>
                        <Label text="Time Tracking" textFill="#2d3436" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        <PieChart fx:id="timeTrackingPieChart" prefHeight="250.0" labelsVisible="true" style="-fx-background-color: transparent;"/>
                    </VBox>
                </HBox>

                <VBox spacing="20.0" style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 30;">
                    <effect><DropShadow color="rgba(0,0,0,0.05)" radius="15" offsetY="5"/></effect>

                    <HBox alignment="CENTER_LEFT" spacing="20.0">
                        <Label text="User Management (CRUD)" textFill="#2d3436">
                            <font><Font name="Segoe UI Bold" size="20.0"/></font>
                        </Label>
                        <Region HBox.hgrow="ALWAYS" />
                        <TextField fx:id="searchField" promptText="ðŸ” Search users..." prefWidth="250.0"
                                   style="-fx-background-radius: 20; -fx-border-radius: 20; -fx-padding: 10; -fx-border-color: #dfe6e9;"/>
                    </HBox>

                    <TableView fx:id="userTable" prefHeight="300.0" style="-fx-background-color: white; -fx-border-color: #f1f2f6;">
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="50.0" text="ID" style="-fx-alignment: CENTER;" />
                            <TableColumn fx:id="colEmail" prefWidth="250.0" text="Email" />
                            <TableColumn fx:id="colRole" prefWidth="100.0" text="Role" style="-fx-alignment: CENTER;"/>
                            <TableColumn fx:id="colAction" prefWidth="200.0" text="Actions" style="-fx-alignment: CENTER;"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>

                    <Separator style="-fx-background-color: #f1f2f6;" />

                    <Label text="Add / Edit User" textFill="#636e72" style="-fx-font-weight: bold;"/>

                    <HBox spacing="15.0" alignment="CENTER_LEFT">
                        <TextField fx:id="emailInput" promptText="Email Address" prefWidth="250.0"
                                   style="-fx-padding: 10; -fx-background-radius: 10; -fx-border-color: #dfe6e9; -fx-border-radius: 10;"/>
                        <TextField fx:id="passwordInput" promptText="Password (leave empty if unchanged)" prefWidth="250.0"
                                   style="-fx-padding: 10; -fx-background-radius: 10; -fx-border-color: #dfe6e9; -fx-border-radius: 10;"/>
                        <CheckBox fx:id="isAdminInput" text="Admin Access" style="-fx-text-fill: #2d3436; -fx-font-weight: bold;"/>
                    </HBox>

                    <HBox spacing="15.0">
                        <Button onAction="#handleAddUser" text="âž• Add User"
                                style="-fx-background-color: #4A00E0; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                        <Button onAction="#handleUpdateUser" text="âœï¸ Update"
                                style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                        <Button onAction="#handlePromoteUser" text="â­ Promote"
                                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                        <Region HBox.hgrow="ALWAYS" />

                        <Button onAction="#handleClear" text="Clear Form"
                                style="-fx-background-color: white; -fx-text-fill: #636e72; -fx-border-color: #bdc3c7; -fx-border-radius: 10; -fx-padding: 9 20; -fx-cursor: hand;"/>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>
</BorderPane>